<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Piste</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
        }
        .popup {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
            max-width: 300px;
            text-align: center;
        }
        input {
            width: 80%;
            padding: 8px;
            margin: 10px 0;
        }
        button {
            background-color: green;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: darkgreen;
        }
        #motMystere {
            font-size: 20px;
            font-weight: bold;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<div class="popup">
    <h2>R√©sous l'√©nigme !</h2>
    <input type="text" id="reponse" placeholder="Ta r√©ponse ici">
    <button onclick="verifierReponse()">Valider</button>
    <p id="feedback"></p>
    <p id="motMystere"></p>
</div>

<script>
    const enigmes = {
        1: { mot: "soleil", lettre: 1 },
        2: { mot: "montagne", lettre: 6 },
        3: { mot: "rivi√®re", lettre: 7 },
        4: { mot: "for√™t", lettre: 1 },
        5: { mot: "√©toile", lettre: 5 },
        6: { mot: "ch√¢teau", lettre: 8 },
        7: { mot: "nuage", lettre: 2 },
        8: { mot: "chemin", lettre: 9 },
        9: { mot: "pierre", lettre: 4 },
        10: { mot: "lumi√®re", lettre: 10 }
    };

    let motMystere = "__________".split("");

    function chargerProgres() {
        let sauvegarde = JSON.parse(localStorage.getItem("progres")) || {};
        for (let id in sauvegarde) {
            let position = enigmes[id].lettre - 1;
            motMystere[position] = sauvegarde[id];
        }
        afficherMotMystere();
    }

    function afficherMotMystere() {
        document.getElementById("motMystere").innerText = motMystere.join(" ");
    }

    function verifierReponse() {
        let reponse = document.getElementById("reponse").value.toLowerCase().trim();
        let feedback = document.getElementById("feedback");

        for (let id in enigmes) {
            if (enigmes[id].mot === reponse) {
                let sauvegarde = JSON.parse(localStorage.getItem("progres")) || {};

                if (!(id in sauvegarde)) {
                    let position = enigmes[id].lettre - 1;
                    motMystere[position] = reponse[0].toUpperCase();
                    sauvegarde[id] = reponse[0].toUpperCase();
                    localStorage.setItem("progres", JSON.stringify(sauvegarde));

                    feedback.innerText = "Bonne r√©ponse ! üéâ";
                    setTimeout(() => window.close(), 1000); // Ferme la pop-up
                } else {
                    feedback.innerText = "D√©j√† r√©pondu ! ‚úÖ";
                }

                afficherMotMystere();
                return;
            }
        }

        feedback.innerText = "Mauvaise r√©ponse ‚ùå";
    }

    window.onload = chargerProgres;
</script>

</body>
</html>


